:root{
  --bg:#121212; --card:#1b1b1b; --muted:#b3b3b3; --text:#fff;
  --brand:#1DB954; --brand-2:#1ed760; --hr:#222;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial}
.modal{position:fixed;inset:0;display:flex;flex-direction:column;background:var(--bg)}
.modal .scroll-area{flex:1;overflow:auto;-webkit-overflow-scrolling:touch;padding:12px 16px}
.modal .scroll-area.with-controls{padding-bottom:140px}

/* Bienvenida */
#welcome-modal{justify-content:center;align-items:center;z-index:3000}
.welcome-box{width:min(520px,90%);background:linear-gradient(180deg,#0f0f0f,#171717);padding:24px 20px;border-radius:16px;box-shadow:0 10px 40px rgba(0,0,0,.5);text-align:center}
.brand{margin:0 0 8px 0;color:var(--brand);font-weight:800;letter-spacing:.3px}
.brand.small{font-size:22px;margin:0}
.progress{height:8px;background:#222;border-radius:999px;overflow:hidden;margin:12px 0}
.progress .bar{height:100%;width:0;background:var(--brand);transition:width .3s ease}
.sub{color:var(--muted);margin:0}

/* Topbar búsqueda */
.topbar{position:sticky;top:0;z-index:10;background:var(--bg);padding:10px 16px;border-bottom:1px solid var(--hr)}
.search-row{display:flex;gap:8px;align-items:center;margin-top:8px}
.search-row input{flex:1;height:44px;border-radius:12px;background:#1d1d1d;border:1px solid #2a2a2a;color:#ddd;padding:0 14px}
.search-row .btn-solid{height:44px;border-radius:12px;padding:0 14px;background:var(--brand);border:none;color:#0b0b0b;font-weight:700}
.results-line{color:#9a9a9a;margin-top:8px}

/* Grilla de álbumes 2 col clean */
.album-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:14px 12px}
.album-item{display:grid;grid-template-columns:92px 1fr;gap:10px;align-items:center}
.album-item img{width:92px;height:92px;border-radius:12px;object-fit:cover;display:block;background:#0e0e0e}
.album-item-info h3{margin:0 0 4px 0;font-size:16px;line-height:1.2}
.album-item-info p{margin:0;color:#9a9a9a;font-size:12px}

/* HERO */
.hero{position:sticky;top:0;z-index:5;height:210px;background:#0d0d0d url('') center/cover no-repeat}
.hero::before{content:'';position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,.35),rgba(0,0,0,.75))}
.hero .hero-overlay{position:absolute;left:16px;right:16px;bottom:18px}
.hero h2{margin:0 0 6px 0;font-size:26px;text-shadow:0 2px 18px rgba(0,0,0,.7)}
.hero p{margin:0;color:#cfcfcf}

/* Lista pistas */
.list{display:flex;flex-direction:column;gap:8px}
.playlist-item{display:grid;grid-template-columns:56px 1fr auto;gap:10px;align-items:center;background:#171717;border:1px solid #202020;border-radius:14px;padding:10px}
.playlist-item img{width:56px;height:56px;border-radius:10px;object-fit:cover}
.playlist-item-info h3{margin:0 0 4px 0;font-size:16px;font-weight:800}
.playlist-item-info p{margin:0;color:#9a9a9a;font-size:12px}
.playlist-item.active{outline:2px solid rgba(29,185,84,.55)}
.hq-indicator{display:inline-block;font-size:11px;padding:3px 6px;border-radius:8px;background:rgba(29,185,84,.16);border:1px solid rgba(29,185,84,.55);color:#7dffb0;margin-left:6px;vertical-align:middle}

/* mini EQ */
.eq{display:inline-grid;grid-template-columns:4px 4px 4px;gap:3px;width:17px;height:12px;margin-right:8px}
.eq span{display:block;width:100%;align-self:end;background:var(--brand);border-radius:2px;animation:bm 1s infinite ease-in-out}
.eq span:nth-child(2){animation-delay:.15s}
.eq span:nth-child(3){animation-delay:.3s}
@keyframes bm{0%,100%{height:20%}50%{height:100%}}

/* Controles */
.controls{background:#121212;border-top:1px solid var(--hr)}
.sticky-bottom{position:sticky;bottom:0;z-index:6}
.timeline{display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:10px;padding:8px 12px}
.timeline input[type=range]{width:100%}
.buttons{display:flex;justify-content:center;gap:12px;padding:8px 12px 16px}
.btn-ctrl{width:50px;height:50px;border-radius:50%;background:#1a1a1a;border:1px solid #2a2a2a;color:#e8e8e8}
.btn-ctrl.play{background:#262626;border-color:#333}
.footer-note{color:#7e7e7e;text-align:center;font-size:11px;padding:6px 0 10px}

/* Fab */
.fab{position:fixed;right:18px;width:66px;height:66px;border-radius:50%;border:none;background:#0f0f0f;color:var(--brand);box-shadow:0 10px 30px rgba(0,0,0,.45);z-index:2600}
.fab i{font-size:24px}
.fab-search{bottom:18px}
.fab-player{bottom:94px}
.fab-fav{bottom:170px}

/* Calidad popup */
.quality-wrap{position:sticky;top:210px;z-index:6;padding:10px 16px;background:linear-gradient(to bottom,rgba(18,18,18,1),rgba(18,18,18,.65),rgba(18,18,18,0))}
.chip{border-radius:20px;background:#1a1a1a;border:1px solid #2a2a2a;color:#e8e8e8;padding:8px 12px}
#quality-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.35);display:none;z-index:4000}
#quality-backdrop.show{display:block}
.quality-menu{position:fixed;left:50%;transform:translateX(-50%);bottom:94px;width:min(580px,92vw);background:#181818;border:1px solid #262626;border-radius:16px;box-shadow:0 14px 50px rgba(0,0,0,.5);display:none;z-index:4010}
.quality-menu.show{display:block}
.quality-title{padding:14px 16px;border-bottom:1px solid #242424;color:#dcdcdc;font-weight:700}
.quality-options{display:flex;flex-direction:column;padding:8px}
.quality-option{display:flex;align-items:center;justify-content:space-between;gap:10px;background:#202020;border:1px solid #2b2b2b;color:#f0f0f0;padding:14px;border-radius:12px;margin:6px 0}
.quality-option .badge-hq{background:rgba(29,185,84,.16);border:1px solid rgba(29,185,84,.55);color:#7dffb0;border-radius:8px;padding:2px 6px;font-size:11px}
.quality-option .check{opacity:.2}

/* Mensajitos */
.loading,.msg{text-align:center;color:#cfcfcf;padding:16px}
.spacer{height:8px}

/* Ocultos de legado */
#cover-image,#song-title,#song-artist,#favorites-cover-image,#favorites-song-title,#favorites-song-artist{display:none}
