/* =================================================================
   Sanavera MP3 - v4.0 CSS (Restaurado y Mejorado)
   BASE: Estilos originales del usuario.
   CAMBIOS: Se añade barra de navegación, se ajusta el reproductor
   para evitar solapamientos y se añaden estilos para listas.
   ================================================================= */
:root {
  --bg: #0e0f13; --elev-1: #161821; --elev-2: #1b1e27; --elev-3: #222634;
  --text: #f6f7fb; --text-muted: #aab0c0; --brand: #5ee192; --danger: #ff4757;
  --line: #2a2f3e; --radius-md: 12px; --radius-sm: 8px;
  --nav-height: 70px; --safe-area: env(safe-area-inset-bottom);
  --content-padding: 16px; --shadow-lg: 0 8px 32px rgba(0,0,0,.35);
  --transition: 200ms cubic-bezier(.4,0,.2,1);
}
html { color-scheme: dark; }
body {
  margin: 0; background-color: var(--bg); color: var(--text);
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Inter, system-ui, sans-serif;
  height: 100vh; width: 100vw; overflow: hidden;
}
body.modal-open { position: fixed; width: 100%; }

/* ======================= MODAL (BASE) ======================= */
.modal {
  position: fixed; inset: 0; z-index: 1000;
  background-color: var(--bg);
  display: none; flex-direction: column;
}
.modal.active { display: flex; }
.modal-content { width: 100%; height: 100%; display: flex; flex-direction: column; overflow: hidden; }

/* ======================= BARRA DE NAVEGACIÓN INFERIOR ======================= */
#bottom-nav {
  position: fixed; bottom: 0; left: 0; right: 0; z-index: 1100;
  height: calc(var(--nav-height) + var(--safe-area));
  background: rgba(22, 24, 33, 0.9); backdrop-filter: blur(10px);
  border-top: 1px solid var(--line); display: flex; justify-content: space-around;
  padding: 10px 0 var(--safe-area);
}
.nav-link {
  background: none; border: none; color: var(--text-muted); cursor: pointer;
  display: flex; flex-direction: column; align-items: center; gap: 4px;
  font-size: 10px; flex: 1;
}
.nav-link i { font-size: 22px; }
.nav-link.active { color: var(--brand); }

/* Contenido principal con padding para no ser tapado por la nav */
#app-container { height: 100%; padding-bottom: calc(var(--nav-height) + var(--safe-area)); }

/* ======================= BÚSQUEDA ======================= */
.topbar { padding: var(--content-padding); background: var(--elev-1); }
.search-row { display: flex; gap: 12px; }
#search-input {
  flex: 1; background: var(--elev-2); color: var(--text); border: 1px solid var(--line);
  border-radius: var(--radius-md); padding: 12px 16px; font-size: 16px; outline: none;
}
#search-button {
  width: 48px; height: 48px; min-width: 48px; border: none; border-radius: 50%;
  background: var(--elev-2); color: var(--brand); font-size: 18px; cursor: pointer;
}
#results-count { margin-top: 12px; font-size: 13px; color: var(--text-muted); text-align: center; }
#album-list { flex: 1; overflow-y: auto; display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 18px; padding: var(--content-padding); }
.album-item { cursor: pointer; }
.album-item img { width: 100%; aspect-ratio: 1 / 1; object-fit: cover; border-radius: var(--radius-md); background: var(--elev-2); }
.album-item-info h3 { margin: 8px 0 2px; font-size: 14px; font-weight: 600; }
.album-item-info p { margin: 0; font-size: 12px; color: var(--text-muted); }

/* ======================= REPRODUCTOR (HERO LAYOUT) ======================= */
.player-hero {
  height: 40vh; width: 100%;
  background-size: cover; background-position: center;
  position: relative;
  display: flex; flex-direction: column; justify-content: flex-end;
  padding: var(--content-padding); text-shadow: 0 2px 8px rgba(0,0,0,.6);
}
.player-hero::before {
  content: ''; position: absolute; inset: 0;
  background: linear-gradient(to top, var(--bg) 15%, transparent 70%);
}
.hero-text { position: relative; text-align: center; }
.hero-text h2 { margin: 0 0 4px; font-size: 24px; }
.hero-text p { margin: 0; font-size: 14px; color: var(--text-muted); }

#playlist { flex: 1; overflow-y: auto; padding: var(--content-padding); }
.playlist-item {
    display: flex; align-items: center; gap: 12px; padding: 8px; border-radius: var(--radius-sm);
    cursor: pointer;
}
.playlist-item.active { background: var(--elev-3); }
.playlist-item.active h3 { color: var(--brand); }
.playlist-item img { width: 48px; height: 48px; border-radius: 6px; object-fit: cover; }
.playlist-item-info { flex: 1; min-width: 0; }
.playlist-item-info h3, .playlist-item-info p { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin: 0; }
.playlist-item-info h3 { font-size: 15px; font-weight: 500; }
.playlist-item-info p { font-size: 13px; color: var(--text-muted); margin-top: 2px; }
.playlist-item-actions { margin-left: auto; display: flex; }
.btn-icon { background:none; border:none; color: var(--text-muted); font-size: 18px; padding: 10px; cursor: pointer; border-radius: 50%; }
.btn-favorite.active { color: var(--danger); }
.eq { display:inline-flex; align-items:flex-end; gap:2px; width:14px; height:12px; margin-right: 8px; }
.eq span { width:3px; height:100%; background:var(--brand); animation:bar 1.2s ease-in-out infinite; }
.eq span:nth-child(2){ animation-delay:.2s; }
.eq span:nth-child(3){ animation-delay:.4s; }
@keyframes bar{ 0%,100%{ transform:scaleY(.3); } 50%{ transform:scaleY(1); } }

.controls-section { padding: 12px var(--content-padding); background: var(--elev-1); border-top: 1px solid var(--line); }
.controls { display: flex; justify-content: space-around; align-items: center; }
.btn { background: none; border: none; color: var(--text); width: 52px; height: 52px; border-radius: 50%; font-size: 20px; }
.btn-play { font-size: 24px; width: 64px; height: 64px; background: var(--brand); color: var(--bg); }
.btn-play .fa-pause { display: none; }
.btn-play.playing .fa-play { display: none; }
.btn-play.playing .fa-pause { display: block; }
.btn.active { color: var(--brand); }

/* ======================= LISTAS DE REPRODUCCIÓN ======================= */
#playlists-modal .modal-content { padding: var(--content-padding); }
.playlists-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
#btn-create-playlist { background: var(--brand); color: var(--bg); border: none; padding: 10px 16px; border-radius: var(--radius-md); font-weight: 600; }
.playlist-entry { display: flex; align-items: center; gap: 16px; padding: 12px; cursor: pointer; }
.playlist-entry:hover { background: var(--elev-1); border-radius: var(--radius-sm); }
.playlist-entry .fas { font-size: 24px; color: var(--text-muted); }

/* ======================= DIÁLOGOS (Pop-ups) ======================= */
.dialog {
    position: fixed; inset: 0; z-index: 2000;
    background: rgba(0,0,0,0.6); backdrop-filter: blur(5px);
    display: none; justify-content: center; align-items: center;
}
.dialog.active { display: flex; }
.dialog-content { background: var(--elev-2); padding: 24px; border-radius: var(--radius-md); width: 90%; max-width: 340px; }
.dialog-content h3 { margin: 0 0 16px; }
.dialog-content input { width: 100%; background: var(--bg); border: 1px solid var(--line); padding: 12px; border-radius: var(--radius-sm); color: var(--text); }
.dialog-buttons { display: flex; justify-content: flex-end; gap: 12px; margin-top: 20px; }
.dialog-buttons button { background: var(--elev-3); border: none; padding: 10px 16px; color: var(--text); border-radius: var(--radius-sm); }
#add-to-playlist-options button { width: 100%; text-align: left; background: var(--elev-1); margin-bottom: 8px; }

/* ======================= OTROS ======================= */
#now-playing-fab {
    position: fixed; bottom: calc(var(--nav-height) + 24px + var(--safe-area)); right: 24px;
    z-index: 1050; width: 60px; height: 60px; border-radius: 50%;
    background: var(--brand); color: var(--bg); border: none;
    font-size: 22px; box-shadow: var(--shadow-lg); display: none;
}
.empty-state, .loading-state { text-align: center; padding: 48px; color: var(--text-muted); }
